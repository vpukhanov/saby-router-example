define('router', function() {
   return {};
});
define('Router/router', [
   'View/Executor/TClosure',
   'Application/Env',
   'Application/Initializer',
   'Core/Control',
   'tslib',
   'router',
   'Env/Env',
   'require',
   'exports'
], function(n, i, o, v, h, a, u, g, e) {
   Object.defineProperty(e, '__esModule', { value: true }), (e['Router/_private/UrlRewriter'] = true);
   var p = (function() {
         'use strict';
         var e = {},
            t = (function(e, t, r) {
               Object.defineProperty(t, '__esModule', { value: true });
               var i = /^http[s]?:\/\//,
                  v = /\/{2,}/g,
                  o = /^\//,
                  a = /\/$/,
                  n = null,
                  u = null;
               function s(e) {
                  return c(e, n);
               }
               function f(e) {
                  return c(e, u);
               }
               function c(e, t) {
                  var r = h(e),
                     n = r.path,
                     i = r.misc;
                  if ('/' === n && t && t.rootRoute) return t.rootRoute + i;
                  if (t) {
                     for (var o = g(n).split('/'), a = t.tree, u = null, s = -1, f = 0; f < o.length; f++) {
                        var c = o[f];
                        if (!a[c]) break;
                        var l = a[c].value;
                        if (l) (u = l), (s = f);
                        a = a[c].tree;
                     }
                     if (u) {
                        var p = o.slice(0, s + 1).join('/'),
                           d;
                        return n.replace(p, u).replace(v, '/') + i;
                     }
                  }
                  return n + i;
               }
               function h(e) {
                  var t = e.match(/[?#]/);
                  if (t) {
                     var r = t.index;
                     return { path: e.substring(0, r), misc: e.slice(r) };
                  }
                  return { path: e, misc: '' };
               }
               function g(e) {
                  var t = e.replace(i, ''),
                     r = t.indexOf('?'),
                     n = t.indexOf('#');
                  if (-1 !== r) t = t.slice(0, r);
                  if (-1 !== n) t = t.slice(0, n);
                  return (t = t.replace(o, '').replace(a, ''));
               }
               function l(e) {
                  var t = d(e);
                  (n = p(t)), (u = p(y(t)));
               }
               function p(e) {
                  var o = { tree: {}, rootRoute: null };
                  return (
                     e.forEach(function(e) {
                        var t = e[0],
                           r = e[1];
                        if ('/' === t) return void (o.rootRoute = '/' + g(r));
                        var n = g(t).split('/'),
                           i = o.tree;
                        n.forEach(function(e, t) {
                           if (!i.hasOwnProperty(e)) i[e] = { value: null, tree: {} };
                           if (t === n.length - 1) if (!i[e].value || i[e].value.length > r.length) i[e].value = r;
                           i = i[e].tree;
                        });
                     }),
                     o
                  );
               }
               function d(e) {
                  if (!e) return [];
                  var t = Object.keys(e),
                     r = t.length,
                     n = new Array(r);
                  while (r--) n[r] = [t[r], e[t[r]]];
                  return n;
               }
               function y(e) {
                  return e.map(function(e) {
                     return [e[1], e[0]];
                  });
               }
               l(r || {}), (t.get = s), (t.getReverse = f), (t._prepareRoutes = l);
            })(g, e, a);
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
         return e;
      })(),
      t = p;
   e['wml!Router/_private/Route'] = true;
   var y = (function() {
      var e = {},
         t = (function(d) {
            function e() {
               debugger;
            }
            var t = Array.prototype.slice.call(arguments),
               v = {},
               h = {},
               r = function e(t, r, n, i, o) {
                  var a = 0,
                     u = 0,
                     s = (r && r.key) || '_',
                     f = { id: [], def: void 0 },
                     c = d.configResolver.calcParent(
                        this,
                        'undefined' === typeof currentPropertyName ? void 0 : currentPropertyName,
                        t
                     ),
                     l = d.getMarkupGenerator(i);
                  try {
                     var p = l.joinElements(
                        [
                           d.getter(t, ['_options', 'content'])
                              ? [
                                   l.createControl(
                                      'resolver',
                                      d.getter(t, ['_options', 'content']),
                                      d.uniteScope(l.escape(d.getter(t, ['_urlOptions'])), {}),
                                      d.plainMergeAttr(r, {
                                         attributes: {},
                                         events: 'undefined' === typeof window ? {} : {},
                                         key: s + '0_0_',
                                         inheritOptions: r ? r.inheritOptions : {},
                                         internal: r ? r.internal : {},
                                         context: r ? r.context : {}
                                      }),
                                      {
                                         data: t,
                                         ctx: this,
                                         pName:
                                            'undefined' !== typeof currentPropertyName ? currentPropertyName : void 0,
                                         viewController: c
                                      },
                                      i ? n + 'part_' + u++ : n,
                                      v,
                                      h,
                                      d.config,
                                      {},
                                      f
                                   )
                                ]
                              : [
                                   l.createTag(
                                      'span',
                                      {
                                         attributes: {},
                                         events: 'undefined' === typeof window ? {} : {},
                                         key: s + '1_0_'
                                      },
                                      [],
                                      r,
                                      f,
                                      c
                                   )
                                ]
                        ],
                        s,
                        f
                     );
                     if (f && f.def) (p = l.chain(p, f, r)), (f = void 0);
                  } catch (e) {
                     d.templateError('undefined', e, t);
                  }
                  return p || l.createText('');
               };
            return (r.stable = true), (r.reactiveProps = ['_urlOptions']), r;
         })(n);
      if (t instanceof Function) return t;
      else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
      else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
      return e;
   })();
   e['Router/_private/StoreManager'] = true;
   var s = (function() {
      'use strict';
      var e = {},
         t = (function(e, t, r, n) {
            Object.defineProperty(t, '__esModule', { value: true });
            var i = 'RouterData',
               o = 'CoreInstance',
               a,
               u = new ((function() {
                  function e() {
                     this._fakeStorage = {};
                  }
                  return (
                     (e.prototype.getLocation = function() {
                        if (r.isInit()) return n.location;
                        else if ('undefined' !== typeof window) return window.location;
                        else return null;
                     }),
                     (e.prototype.getRouterStore = function() {
                        if (r.isInit()) return n.getStore(i);
                        else if ('undefined' !== typeof window) return this._fakeStorage;
                        else return {};
                     }),
                     (e.prototype.getCoreInstance = function() {
                        if (r.isInit()) {
                           var e = n.getStore(o);
                           return e && e.instance;
                        }
                        return null;
                     }),
                     e
                  );
               })())();
            t.default = u;
         })(g, e, o, i);
      if (t instanceof Function) return t;
      else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
      else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
      return e;
   })();
   e['wml!Router/_private/Reference'] = true;
   var d = (function() {
      var e = {},
         t = (function(h) {
            function e() {
               debugger;
            }
            var t = Array.prototype.slice.call(arguments),
               g = {},
               y = {},
               r = function e(t, r, n, i, o) {
                  var a = 0,
                     u = 0,
                     s = (r && r.key) || '_',
                     f = { id: [], def: void 0 },
                     c = h.configResolver.calcParent(
                        this,
                        'undefined' === typeof currentPropertyName ? void 0 : currentPropertyName,
                        t
                     ),
                     l = h.getMarkupGenerator(i),
                     p,
                     d;
                  try {
                     var v = l.joinElements(
                        [
                           l.createControl(
                              'resolver',
                              h.getter(t, ['_options', 'content']),
                              { href: h.getter(t, ['_href']) || h.getter(t, ['_state']) },
                              h.plainMergeAttr(r, {
                                 attributes: {},
                                 events:
                                    'undefined' === typeof window
                                       ? {}
                                       : {
                                            'on:click': [
                                               {
                                                  name: 'event',
                                                  args: [],
                                                  value: '_clickHandler',
                                                  fn: ((p = c),
                                                  (d = function() {
                                                     var e = arguments[0],
                                                        t = h.getter(this, ['_clickHandler']).apply(this, arguments);
                                                     e.result = t;
                                                  }),
                                                  ((d = d.bind(p)).control = p),
                                                  (d.isControlEvent = false),
                                                  d)
                                               }
                                            ]
                                         },
                                 key: s + '0_',
                                 inheritOptions: r ? r.inheritOptions : {},
                                 internal: r ? r.internal : {},
                                 context: r ? r.context : {}
                              }),
                              {
                                 data: t,
                                 ctx: this,
                                 pName: 'undefined' !== typeof currentPropertyName ? currentPropertyName : void 0,
                                 viewController: c
                              },
                              i ? n + 'part_' + u++ : n,
                              g,
                              y,
                              h.config,
                              {},
                              f
                           )
                        ],
                        s,
                        f
                     );
                     if (f && f.def) (v = l.chain(v, f, r)), (f = void 0);
                  } catch (e) {
                     h.templateError('undefined', e, t);
                  }
                  return v || l.createText('');
               };
            return (r.stable = true), (r.reactiveProps = ['_href', '_state', '_clickHandler']), r;
         })(n);
      if (t instanceof Function) return t;
      else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
      else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
      return e;
   })();
   e['Router/_private/Data'] = true;
   var _ = (function() {
         'use strict';
         var e = {},
            t = (function(e, t, r, i) {
               function n() {
                  return y('history');
               }
               function o(e) {
                  _('history', e);
               }
               function a() {
                  return y('historyPosition');
               }
               function u(e) {
                  _('historyPosition', e);
               }
               function s() {
                  return y('relativeUrl') || g();
               }
               function f(e) {
                  _('relativeUrl', e);
               }
               function c() {
                  return g();
               }
               function l() {
                  return y('registeredRoutes');
               }
               function p() {
                  return y('registeredReferences');
               }
               function d() {
                  return r.default.getCoreInstance();
               }
               function v(e) {
                  var t = g(),
                     r = { id: 0, state: i.get(t), href: t };
                  if ('undefined' !== typeof window)
                     if (window.history.state && 'number' === typeof window.history.state.id)
                        r.id = window.history.state.id;
                     else if (!window.history.state) window.history.replaceState(r, r.href, r.href);
                  var n = {
                     IS_ROUTER_STORAGE: true,
                     history: [r],
                     historyPosition: 0,
                     registeredRoutes: {},
                     registeredReferences: {},
                     relativeUrl: r.state
                  };
                  Object.assign(e, n);
               }
               function h() {
                  var e = r.default.getRouterStore();
                  if (!e || (e && !e.IS_ROUTER_STORAGE)) v(e);
                  return e;
               }
               function g() {
                  var e = r.default.getLocation();
                  if (e) return e.pathname + e.search + e.hash;
                  else return null;
               }
               function y(e) {
                  return h()[e];
               }
               function _(e, t) {
                  var r;
                  return (h()[e] = t);
               }
               Object.defineProperty(t, '__esModule', { value: true }),
                  (t.getHistory = n),
                  (t.setHistory = o),
                  (t.getHistoryPosition = a),
                  (t.setHistoryPosition = u),
                  (t.getRelativeUrl = s),
                  (t.setRelativeUrl = f),
                  (t.getVisibleRelativeUrl = c),
                  (t.getRegisteredRoutes = l),
                  (t.getRegisteredReferences = p),
                  (t.getCoreInstance = d);
            })(g, e, s, p);
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
         return e;
      })(),
      r = _;
   e['Router/_private/History'] = true;
   var O = (function() {
         'use strict';
         var e = {},
            t = (function(e, t, o, a) {
               function r() {
                  return a.getHistory()[a.getHistoryPosition() - 1];
               }
               function n() {
                  return a.getHistory()[a.getHistoryPosition()];
               }
               function i() {
                  return a.getHistory()[a.getHistoryPosition() + 1];
               }
               function u() {
                  var e = a.getHistory(),
                     t = a.getHistoryPosition();
                  if (0 === t) {
                     var r = 'undefined' !== typeof window && window.history.state,
                        n = r && r.state,
                        i = a.getVisibleRelativeUrl();
                     e.unshift({ id: e[0].id - 1, state: n || o.get(i), href: i });
                  } else a.setHistoryPosition(t - 1);
                  l();
               }
               function s() {
                  var e = a.getHistory(),
                     t = a.getHistoryPosition() + 1;
                  if ((a.setHistoryPosition(t), t === e.length)) {
                     var r = a.getRelativeUrl();
                     e.push({ id: e[t - 1].id + 1, state: o.get(r), href: r });
                  }
                  l();
               }
               function f(e) {
                  var t = a.getHistory(),
                     r = a.getHistoryPosition();
                  (t.length = r + 1), (e.id = t[r].id + 1), t.push(e), a.setHistoryPosition(r + 1), l();
                  var n = e.href || e.state;
                  window.history.pushState(e, n, n);
               }
               function c(e) {
                  var t = a.getHistory(),
                     r = a.getHistoryPosition();
                  (e.id = t[r].id), (t[r] = e), l();
                  var n = e.href || e.state;
                  window.history.replaceState(e, n, n);
               }
               function l() {
                  a.setRelativeUrl(a.getHistory()[a.getHistoryPosition()].state);
               }
               Object.defineProperty(t, '__esModule', { value: true }),
                  (t.getPrevState = r),
                  (t.getCurrentState = n),
                  (t.getNextState = i),
                  (t.back = u),
                  (t.forward = s),
                  (t.push = f),
                  (t.replaceState = c);
            })(g, e, p, _);
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
         return e;
      })(),
      f = O;
   e['Router/_private/MaskResolver'] = true;
   var R = (function() {
         'use strict';
         var e = {},
            t = (function(e, t, r, p, d) {
               function n(e, t) {
                  var r, n;
                  return u(e), m(_(l(e, {}, t)), C);
               }
               function i(e, t) {
                  var r;
                  return u(e), O(l(e, t));
               }
               function o(e, t) {
                  u(e);
                  var r = t.clear ? {} : t,
                     n;
                  return c(d.get(p.getRelativeUrl()), e, r);
               }
               function a(e) {
                  var t;
                  return w(d.get(e)) + '/Index';
               }
               function u(e) {
                  if (-1 !== e.indexOf('/') && -1 !== e.indexOf('='))
                     r.IoC.resolve('ILogger').error('Router.MaskResolver', 'Mask "' + e + '" is invalid');
               }
               Object.defineProperty(t, '__esModule', { value: true }),
                  (t.calculateUrlParams = n),
                  (t.calculateCfgParams = i),
                  (t.calculateHref = o),
                  (t.getAppNameByUrl = a);
               var v =
                  '/undefined/undefined/undefined/undefined/undefined/undefined/undefined/undefined/undefined/undefined';
               function h(e) {
                  var t = e.match(/[?#]/);
                  if (t) {
                     var r = t.index;
                     return { path: e.substring(0, r).replace(/\/$/, ''), misc: e.slice(r) };
                  }
                  return { path: e.replace(/\/$/, ''), misc: '' };
               }
               var g = 2;
               function l(e, t, r) {
                  var n = [],
                     i = y(e, function(e) {
                        n.push({ name: e.name, value: t[e.name] });
                     }),
                     o = r || p.getRelativeUrl(),
                     a = h(o),
                     u = a.path,
                     s = a.misc;
                  o = u + v + s;
                  var f,
                     c = d.get(o).match(i);
                  if (c)
                     for (var l = g; l < c.length - 1; l++)
                        if (((n[l - g].urlValue = c[l]), 'undefined' === n[l - g].urlValue)) n[l - g].urlValue = void 0;
                  return n;
               }
               function y(e, t) {
                  var r = s(e),
                     n = [];
                  f(r, function(e) {
                     if ((n.push({ prefixEnd: e.prefixEnd, suffixStart: e.suffixStart }), t)) t(e);
                  });
                  for (var i = n.length - 1; i >= 0; i--)
                     r = r.slice(0, n[i].prefixEnd) + '([^\\/?&#]+)' + r.slice(n[i].suffixStart);
                  return r;
               }
               function s(e) {
                  var t = e;
                  if (-1 !== t.indexOf('/'))
                     if ('/' === t[0]) t = '([/]|.*?\\.html/)' + t.slice(1);
                     else t = '(.*?/)' + t;
                  else if (-1 !== t.indexOf('=')) t = '(.*?\\?|.*?&)' + t;
                  else t = '(.*?/)' + t;
                  if (-1 !== t.indexOf('=')) t += '(#.*|&.+)?';
                  else t += '(#.*|/.*|\\?.+)?';
                  return t;
               }
               function f(e, t) {
                  var r = /:(\w+)/g,
                     n = r.exec(e);
                  while (n) t({ prefixEnd: n.index, suffixStart: n.index + n[0].length, name: n[1] }), (n = r.exec(e));
               }
               function _(e) {
                  var t = {};
                  return (
                     e.forEach(function(e) {
                        t[e.name] = e.urlValue;
                     }),
                     t
                  );
               }
               function O(e) {
                  var t = {};
                  return (
                     e.forEach(function(e) {
                        t[e.name] = e.value;
                     }),
                     t
                  );
               }
               function c(e, t, r) {
                  var n = l(t, r),
                     i = O(n),
                     o,
                     a = R(t, _(n)),
                     u = R(t, m(i, b)),
                     s = e;
                  if (u && '/' === u[0]) s = u;
                  else if (a) {
                     if (u) s = e.replace(a, u);
                     else if (-1 !== e.indexOf('/' + a)) s = e.replace('/' + a, '');
                     else if (-1 !== e.indexOf('?' + a)) {
                        var f;
                        if (-1 !== e.indexOf('?' + a + '&')) s = e.replace('?' + a + '&', '?');
                        else s = e.replace('?' + a, '');
                     } else if (-1 !== e.indexOf('&' + a)) s = e.replace('&' + a, '');
                  } else if (u) {
                     var c = e.indexOf('?');
                     if (-1 !== u.indexOf('='))
                        if (-1 !== c) s += '&' + u;
                        else s += '?' + u;
                     else if (-1 !== c) s = P(e.slice(0, c)) + u + e.slice(c);
                     else s = P(e) + u;
                  }
                  return s;
               }
               function R(e, t) {
                  var r = 0,
                     n = 0,
                     i = e;
                  f(i, function(e) {
                     if ((r++, void 0 !== t[e.name])) n++, (i = i.replace(':' + e.name, t[e.name]));
                  });
                  var o = '';
                  if (n === r) o = i;
                  return o;
               }
               function P(e) {
                  if ('/' === e[e.length - 1]) return e;
                  else return e + '/';
               }
               function w(e) {
                  var t = e || '';
                  if (-1 !== t.indexOf('?')) t = t.replace(/\?.*/, '');
                  if (-1 !== t.indexOf('#')) t = t.replace(/#.*/, '');
                  if (-1 !== t.indexOf('/')) t = t.split('/')[1];
                  return t;
               }
               function m(e, t) {
                  var r = {};
                  for (var n in e) if (e.hasOwnProperty(n)) r[n] = t(e[n]);
                  return r;
               }
               function b(e) {
                  var t = typeof e,
                     r = e;
                  if ('undefined' !== t) {
                     if ('string' !== t) r = JSON.stringify(r);
                     r = encodeURIComponent(r);
                  }
                  return r;
               }
               function C(e) {
                  var t = e;
                  if ('undefined' !== typeof t)
                     try {
                        t = decodeURIComponent(t);
                     } catch (e) {}
                  return t;
               }
            })(g, e, u, _, p);
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
         return e;
      })(),
      c = R;
   e['Router/_private/Controller'] = true;
   var P = (function() {
         'use strict';
         var e = {},
            t = (function(e, t, r, a, i, u, s) {
               Object.defineProperty(t, '__esModule', { value: true });
               var f = false;
               function n() {
                  return !!a.getCoreInstance();
               }
               function c(e, t, r) {
                  var n = s.get(e.state),
                     i = e.href || s.getReverse(n),
                     o = u.getCurrentState();
                  if (o.state === n || f) return;
                  var a = { state: n, href: i };
                  (f = true),
                     y(a).then(
                        function(e) {
                           if (((f = false), e)) {
                              if (t) t();
                              else u.push(a);
                              O(a, o);
                           } else if (r) r();
                        },
                        function(e) {
                           if (((f = false), r)) r(e);
                        }
                     );
               }
               function o(e) {
                  var t = s.get(e.state),
                     r,
                     n = { state: t, href: e.href || s.getReverse(t) };
                  c(n, function() {
                     return u.replaceState(n);
                  });
               }
               function l(e, t, r) {
                  a.getRegisteredRoutes()[e.getInstanceId()] = { beforeUrlChangeCb: t, afterUrlChangeCb: r };
               }
               function p(e) {
                  delete a.getRegisteredRoutes()[e.getInstanceId()];
               }
               function d(e, t) {
                  a.getRegisteredReferences()[e.getInstanceId()] = { afterUrlChangeCb: t };
               }
               function v(e) {
                  delete a.getRegisteredReferences()[e.getInstanceId()];
               }
               function h() {
                  if ('undefined' !== typeof window) {
                     var o = false;
                     window.onpopstate = function(e) {
                        if (o) return void (o = false);
                        var t = u.getCurrentState(),
                           r = u.getPrevState();
                        if ((!e.state && !r) || (e.state && e.state.id < t.id)) {
                           var n;
                           c(
                              (n = g(r, e.state, e.state || r ? a.getRelativeUrl() : a.getVisibleRelativeUrl())),
                              function() {
                                 return u.back();
                              }
                           );
                        } else {
                           var i, n;
                           c(
                              (n = g(u.getNextState(), e.state, a.getRelativeUrl())),
                              function() {
                                 return u.forward();
                              },
                              function() {
                                 (o = true), window.history.back();
                              }
                           );
                        }
                     };
                  }
               }
               function g(e, t, r) {
                  if (!e)
                     if (t && t.state && t.href) return t;
                     else return { state: s.get(r), href: r };
                  return e;
               }
               function y(t) {
                  var e = u.getCurrentState(),
                     r = i.getAppNameByUrl(t.state),
                     n = i.getAppNameByUrl(e.state);
                  return _(t).then(function(e) {
                     if (r === n) return e;
                     else return (window.location.href = t.href), false;
                  });
               }
               function _(e) {
                  var t = u.getCurrentState(),
                     r = a.getRegisteredRoutes(),
                     n = [];
                  for (var i in r)
                     if (r.hasOwnProperty(i)) {
                        var o = r[i];
                        n.push(o.beforeUrlChangeCb(e, t));
                     }
                  return Promise.all(n).then(function(e) {
                     return -1 === e.indexOf(false);
                  });
               }
               function O(e, t) {
                  var r = a.getRegisteredRoutes(),
                     n = a.getRegisteredReferences();
                  for (var i in r) if (r.hasOwnProperty(i)) r[i].afterUrlChangeCb(e, t);
                  for (var o in n) if (n.hasOwnProperty(o)) n[o].afterUrlChangeCb(e, t);
               }
               function R(e) {
                  var t = a.getCoreInstance();
                  return t && t.changeApplicationHandler(null, e);
               }
               function P(e, t) {
                  if ((r.IoC.resolve('ILogger').log('Router/Controller', e), window)) window.location.href = t;
               }
               h(),
                  (t.canChangeApplication = n),
                  (t.navigate = c),
                  (t.replaceState = o),
                  (t.addRoute = l),
                  (t.removeRoute = p),
                  (t.addReference = d),
                  (t.removeReference = v);
            })(g, e, u, _, R, O, p);
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
         return e;
      })(),
      l = P;
   e['Router/_private/Route'] = true;
   var w = (function() {
         'use strict';
         var e = {},
            t = ((r = g),
            (n = e),
            (a = h),
            (o = y),
            (u = P),
            (s = _),
            (f = R),
            (c = O),
            (l = ['content', 'mask', 'theme', '_isSeparatedOptions', '_logicParent', 'readOnly']),
            (function(t) {
               function e() {
                  var e = (null !== t && t.apply(this, arguments)) || this;
                  return (e._template = o), (e._urlOptions = null), (e._isResolved = false), e;
               }
               return (
                  a.__extends(e, t),
                  (e.prototype._beforeMount = function(e) {
                     (this._urlOptions = {}), this._applyNewUrl(e.mask, e);
                  }),
                  (e.prototype._afterMount = function() {
                     this._register(), this._checkUrlResolved();
                  }),
                  (e.prototype._beforeUpdate = function(e) {
                     this._applyNewUrl(e.mask, e);
                  }),
                  (e.prototype._beforeUnmount = function() {
                     this._unregister();
                  }),
                  (e.prototype._register = function() {
                     var e = this;
                     u.addRoute(
                        this,
                        function(t, r) {
                           return a.__awaiter(e, void 0, void 0, function() {
                              return a.__generator(this, function(e) {
                                 return [2, this._beforeApplyNewUrl(t, r)];
                              });
                           });
                        },
                        function() {
                           return a.__awaiter(e, void 0, void 0, function() {
                              return a.__generator(this, function(e) {
                                 return this._forceUpdate(), [2, Promise.resolve(true)];
                              });
                           });
                        }
                     );
                  }),
                  (e.prototype._unregister = function() {
                     u.removeRoute(this);
                  }),
                  (e.prototype._beforeApplyNewUrl = function(i, o) {
                     return a.__awaiter(this, void 0, Promise, function() {
                        var t, r, n;
                        return a.__generator(this, function(e) {
                           if (
                              ((r = this._urlOptions),
                              (this._urlOptions = f.calculateUrlParams(this._options.mask, i.state)),
                              (n = this._hasResolvedParams()),
                              this._fillUrlOptionsFromCfg(this._options),
                              n && !this._isResolved)
                           )
                              (t = this._notify('enter', [i, o])), (this._isResolved = true);
                           else if (!n && this._isResolved)
                              (t = this._notify('leave', [i, o])), (this._isResolved = false);
                           else t = Promise.resolve(true);
                           if (this._didOptionsChange(this._urlOptions, r))
                              this._notify('change', [this._urlOptions, r]);
                           return [2, t];
                        });
                     });
                  }),
                  (e.prototype._applyNewUrl = function(e, t) {
                     this._urlOptions = f.calculateUrlParams(e);
                     var r = this._hasResolvedParams();
                     return this._fillUrlOptionsFromCfg(t), r;
                  }),
                  (e.prototype._hasResolvedParams = function() {
                     var e = false;
                     for (var t in this._urlOptions)
                        if (this._urlOptions.hasOwnProperty(t))
                           if (void 0 !== this._urlOptions[t]) {
                              e = true;
                              break;
                           }
                     return e;
                  }),
                  (e.prototype._fillUrlOptionsFromCfg = function(e) {
                     for (var t in e)
                        if (
                           e.hasOwnProperty(t) &&
                           !this._isFilteredOptionName(t) &&
                           !this._urlOptions.hasOwnProperty(t)
                        )
                           this._urlOptions[t] = e[t];
                  }),
                  (e.prototype._checkUrlResolved = function() {
                     this._urlOptions = f.calculateUrlParams(this._options.mask, s.getRelativeUrl());
                     var e = this._hasResolvedParams();
                     this._fillUrlOptionsFromCfg(this._options);
                     var t = c.getCurrentState(),
                        r = c.getPrevState();
                     if (e) {
                        if (((this._isResolved = true), !r))
                           r = { state: f.calculateHref(this._options.mask, { clear: true }) };
                        this._notify('enter', [t, r]), this._notify('change', [this._urlOptions, {}]);
                     }
                  }),
                  (e.prototype._isFilteredOptionName = function(e) {
                     return l.indexOf(e) >= 0;
                  }),
                  (e.prototype._didOptionsChange = function(e, t) {
                     var r;
                     for (r in e) if (e.hasOwnProperty(r)) if (!t.hasOwnProperty(r) || e[r] !== t[r]) return true;
                     for (r in t) if (t.hasOwnProperty(r) && !e.hasOwnProperty(r)) return true;
                     return false;
                  }),
                  e
               );
            })((i = v))),
            r,
            n,
            a,
            i,
            o,
            u,
            s,
            f,
            c,
            l,
            p;
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var d in t) if (t.hasOwnProperty(d)) e[d] = t[d];
         return e;
      })(),
      m = w;
   e['Router/_private/Reference'] = true;
   var b,
      C = (function() {
         'use strict';
         var e = {},
            t = ((r = g),
            (n = e),
            (i = h),
            (a = d),
            (u = P),
            (s = R),
            (f = p),
            (function(t) {
               function e() {
                  var e = (null !== t && t.apply(this, arguments)) || this;
                  return (e._template = a), e;
               }
               return (
                  i.__extends(e, t),
                  (e.prototype._beforeMount = function(e) {
                     this._recalcHref(e);
                  }),
                  (e.prototype._afterMount = function() {
                     this._register();
                  }),
                  (e.prototype._beforeUpdate = function(e) {
                     this._recalcHref(e);
                  }),
                  (e.prototype._beforeUnmount = function() {
                     this._unregister();
                  }),
                  (e.prototype._register = function() {
                     var e = this;
                     u.addReference(this, function() {
                        return e._recalcHref(e._options), e._forceUpdate(), Promise.resolve(true);
                     });
                  }),
                  (e.prototype._unregister = function() {
                     u.removeReference(this);
                  }),
                  (e.prototype._recalcHref = function(e) {
                     if (((this._state = s.calculateHref(e.state, e)), e.href)) this._href = s.calculateHref(e.href, e);
                     else this._href = f.getReverse(this._state);
                  }),
                  (e.prototype._clickHandler = function(e) {
                     if (this._options.handleClick && 0 === e.nativeEvent.button) {
                        var t = { state: this._state, href: this._href };
                        if ((e.preventDefault(), false !== this._notify('navigate', [t, e]))) this._changeUrlState(t);
                     }
                  }),
                  (e.prototype._changeUrlState = function(e) {
                     u.navigate(e);
                  }),
                  (e.getDefaultOptions = function() {
                     return { handleClick: true };
                  }),
                  e
               );
            })((o = v))),
            r,
            n,
            i,
            o,
            a,
            u,
            s,
            f,
            c;
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var l in t) if (t.hasOwnProperty(l)) e[l] = t[l];
         return e;
      })();
   e['wml!Router/_private/Popup'] = true;
   var U = (function() {
      var e = {},
         t = (function(y) {
            function e() {
               debugger;
            }
            var t = Array.prototype.slice.call(arguments),
               _ = {},
               O = {};
            function R(t, e, r, n, i) {
               if (e && !e.attributes) e.attributes = {};
               y.prepareAttrsForFocus(e && e.attributes, t);
               var o = 0,
                  a = 0,
                  u = 'content';
               t = y.isolateScope(Object.create(this), t, u);
               var s = (e && e.key) || '_',
                  f = { id: [], def: void 0 },
                  c = y.configResolver.calcParent(this, 'undefined' === typeof u ? void 0 : u, t),
                  l = y.getMarkupGenerator(n),
                  p,
                  d;
               try {
                  var v = l.joinElements(
                     [
                        l.createControl(
                           'resolver',
                           y.getter(t, ['_options', 'content']),
                           {},
                           y.plainMergeAttr(e, {
                              attributes: {},
                              events:
                                 'undefined' === typeof window
                                    ? {}
                                    : {
                                         'on:close': [
                                            {
                                               name: 'event',
                                               args: [],
                                               value: '_popupClosed',
                                               fn: ((p = c),
                                               (d = function() {
                                                  var e = arguments[0],
                                                     t = y.getter(this, ['_popupClosed']).apply(this, arguments);
                                                  e.result = t;
                                               }),
                                               ((d = d.bind(p)).control = p),
                                               (d.isControlEvent = false),
                                               d)
                                            }
                                         ]
                                      },
                              key: s + '0_0_',
                              inheritOptions: e ? e.inheritOptions : {},
                              internal: e ? e.internal : {},
                              context: e ? e.context : {}
                           }),
                           {
                              data: t,
                              ctx: this,
                              pName: 'undefined' !== typeof u ? u : void 0,
                              viewController: c,
                              internal: n ? { __dirtyCheckingVars_0: y.getter(t, ['_options', 'content']) } : {}
                           },
                           n ? r + 'part_' + o++ : r,
                           _,
                           O,
                           y.config,
                           {},
                           f
                        )
                     ],
                     s,
                     f
                  );
                  if (f && f.def) (v = l.chain(v, f, e)), (f = void 0);
               } catch (e) {
                  y.templateError('undefined', e, t);
               }
               return v || l.createText('');
            }
            _['Router/_private/Route'] = t[1];
            var r = function e(t, r, n, i, o) {
               var a = 0,
                  u = 0,
                  s = (r && r.key) || '_',
                  f = { id: [], def: void 0 },
                  c = y.configResolver.calcParent(
                     this,
                     'undefined' === typeof currentPropertyName ? void 0 : currentPropertyName,
                     t
                  ),
                  l = y.getMarkupGenerator(i),
                  p,
                  d,
                  v,
                  h;
               try {
                  var g = l.joinElements(
                     [
                        l.createControl(
                           'wsControl',
                           'ws:Router/_private/Route',
                           {
                              content: y.createDataArray(
                                 [
                                    {
                                       func: ((v = Object.create(t)), (v.viewController = c), R.bind(v)),
                                       internal: i
                                          ? { __dirtyCheckingVars_0: y.getter(t, ['_options', 'content']) }
                                          : {}
                                    }
                                 ],
                                 ''
                              ),
                              mask: y.getter(t, ['_urlMask']),
                              esc: false
                           },
                           y.plainMergeAttr(
                              r,
                              {
                                 attributes: {},
                                 events:
                                    'undefined' === typeof window
                                       ? {}
                                       : {
                                            'on:change': [
                                               {
                                                  name: 'event',
                                                  args: [],
                                                  value: '_urlChanged',
                                                  fn: ((p = c),
                                                  (d = function() {
                                                     var e = arguments[0],
                                                        t = y.getter(this, ['_urlChanged']).apply(this, arguments);
                                                     e.result = t;
                                                  }),
                                                  ((d = d.bind(p)).control = p),
                                                  (d.isControlEvent = true),
                                                  d)
                                               }
                                            ]
                                         },
                                 key: s + '0_',
                                 inheritOptions: r ? r.inheritOptions : {},
                                 internal: r ? r.internal : {},
                                 context: r ? r.context : {}
                              },
                              true
                           ),
                           {
                              data: t,
                              ctx: this,
                              pName: 'undefined' !== typeof currentPropertyName ? currentPropertyName : void 0,
                              viewController: c,
                              internal: i ? {} : {}
                           },
                           n,
                           _,
                           O,
                           y.config
                        )
                     ],
                     s,
                     f
                  );
                  if (f && f.def) (g = l.chain(g, f, r)), (f = void 0);
               } catch (e) {
                  y.templateError('undefined', e, t);
               }
               return g || l.createText('');
            };
            return (r.stable = true), (r.reactiveProps = ['_popupClosed', '_urlMask', '_urlChanged']), r;
         })(n, w);
      if (t instanceof Function) return t;
      else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
      else for (var r in t) if (t.hasOwnProperty(r)) e[r] = t[r];
      return e;
   })();
   e['Router/_private/Popup'] = true;
   var x,
      k = (function() {
         'use strict';
         var e = {},
            t = ((r = g),
            (n = e),
            (i = h),
            (a = U),
            (u = P),
            (s = R),
            (f = O),
            (c = 'id'),
            (l = function(e) {
               return 'function' === typeof e.open && 'function' === typeof e.close;
            }),
            (function(t) {
               function r() {
                  var e = (null !== t && t.apply(this, arguments)) || this;
                  return (e._template = a), e;
               }
               return (
                  i.__extends(r, t),
                  (r.prototype._beforeMount = function(e) {
                     this._urlMask = r.getUrlMask(e);
                     var t = f.getCurrentState();
                     if (t && t.href !== t.state) {
                        this._returnHref = t.href;
                     }
                  }),
                  (r.prototype._beforeUpdate = function(e) {
                     this._urlMask = r.getUrlMask(e);
                  }),
                  (r.prototype._urlChanged = function(e, t, r) {
                     var n = r[c],
                        i = t[c];
                     if (i && !n) this._notify('urlAdded', [i]);
                     else if (!i && n) this._notify('urlRemoved'), this._closePopup();
                     else this._notify('urlChanged', [i, n]);
                  }),
                  (r.prototype._popupClosed = function() {
                     var e = s.calculateHref(this._urlMask, { clear: true });
                     u.navigate({ state: e, href: this._returnHref });
                  }),
                  (r.prototype._closePopup = function() {
                     var e = this._getOpenerControl();
                     if (e) e.close();
                  }),
                  (r.prototype._getOpenerControl = function() {
                     for (var e = this._container.controlNodes, t = 0; t < e.length; t++) {
                        var r = e[t];
                        if (r && r.control && l(r.control)) return r.control;
                     }
                     return null;
                  }),
                  (r.getUrlMask = function(e) {
                     return e.routeName + '-' + e.popupDepth + '/:' + c;
                  }),
                  (r.getDefaultOptions = function() {
                     return { routeName: 'popup', popupDepth: 0 };
                  }),
                  r
               );
            })((o = v))),
            r,
            n,
            i,
            o,
            a,
            u,
            s,
            f,
            c,
            l,
            p;
         if (t instanceof Function) return t;
         else if (t && Object.getPrototypeOf(t) !== Object.prototype) return t;
         else for (var d in t) if (t.hasOwnProperty(d)) e[d] = t[d];
         return e;
      })();
   return (
      (e.Controller = l),
      (e.Data = r),
      (e.History = f),
      (e.MaskResolver = c),
      (e.UrlRewriter = t),
      (e.Reference = C),
      (e.Route = m),
      (e.Popup = k),
      e
   );
});
